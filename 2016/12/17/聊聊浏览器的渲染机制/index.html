<!-- build time:Wed May 15 2019 16:06:15 GMT+0000 (Coordinated Universal Time) --><!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><script>var _hmt=_hmt||[]</script><script async src="//hm.baidu.com/hm.js?d1a1593e59aa081f2f04170bf79d940a"></script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><meta charset="utf-8"><title>聊聊浏览器的渲染机制 | 若邪</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#3F51B5"><meta name="keywords" content="渲染机制"><meta name="description" content="本文中浏览器特指Chrome浏览器开始之前说说几个概念，以及在准备写这篇文章之前对浏览器的渲染机制的了解：DOM：Document Object Model，浏览器将HTML解析成树形的数据结构，简称DOM。CSSOM：CSS Object Model，浏览器将CSS代码解析成树形的数据结构Render Tree：DOM 和 CSSOM 合并后生成 Render Tree(Render Tree"><meta name="keywords" content="渲染机制"><meta property="og:type" content="article"><meta property="og:title" content="聊聊浏览器的渲染机制"><meta property="og:url" content="https://jaycewu.site/2016/12/17/聊聊浏览器的渲染机制/index.html"><meta property="og:site_name" content="若邪"><meta property="og:description" content="本文中浏览器特指Chrome浏览器开始之前说说几个概念，以及在准备写这篇文章之前对浏览器的渲染机制的了解：DOM：Document Object Model，浏览器将HTML解析成树形的数据结构，简称DOM。CSSOM：CSS Object Model，浏览器将CSS代码解析成树形的数据结构Render Tree：DOM 和 CSSOM 合并后生成 Render Tree(Render Tree"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/flow.png"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-c94bff6f56b4d287.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-a083e77f86cbdd64.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-969ad259436c806f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-158f157de2dcfe94.gif?imageMogr2/auto-orient/strip"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-26b26dfb7981d3f6.gif?imageMogr2/auto-orient/strip"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-f0832497c722b2ee.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-3cc4c4bf49217436.gif?imageMogr2/auto-orient/strip"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-e794dfa1aac30651.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-0dcaaf21c8a38aa5.gif?imageMogr2/auto-orient/strip"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-3dce52c52ab84223.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-a1003e53325edcdd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-e422b46948376311.gif?imageMogr2/auto-orient/strip"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-c3e40d64eb51ddbe.gif?imageMogr2/auto-orient/strip"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-f89c59117b544bb1.gif?imageMogr2/auto-orient/strip"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-885f25070824c811.gif?imageMogr2/auto-orient/strip"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-e5e8e2a262aeaba7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-045480359bdfb725.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2125695-e53be79aa842709d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><meta property="og:updated_time" content="2019-05-15T16:05:35.708Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="聊聊浏览器的渲染机制"><meta name="twitter:description" content="本文中浏览器特指Chrome浏览器开始之前说说几个概念，以及在准备写这篇文章之前对浏览器的渲染机制的了解：DOM：Document Object Model，浏览器将HTML解析成树形的数据结构，简称DOM。CSSOM：CSS Object Model，浏览器将CSS代码解析成树形的数据结构Render Tree：DOM 和 CSSOM 合并后生成 Render Tree(Render Tree"><meta name="twitter:image" content="https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/flow.png"><link rel="alternate" type="application/atom+xml" title="若邪" href="/atom.xml"><link rel="shortcut icon" href="/favicon.png"><link rel="stylesheet" href="/css/style.css?v=1.6.10"><script>window.lazyScripts=[]</script></head><body><div id="loading" class="active"></div><aside id="menu"><div class="inner flex-row-vertical"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off"><i class="icon icon-lg icon-close"></i></a><div class="brand-wrap" style="background-image:url(/img/brand.jpg)"><div class="brand"><a href="/" class="avatar waves-effect waves-circle waves-light"><img src="/img/avatar.jpeg"></a><hgroup class="introduce"><h5 class="nickname">若邪</h5><a href="mailto:ruoxieme@gmail.com" title="ruoxieme@gmail.com" class="mail">ruoxieme@gmail.com</a></hgroup></div></div><div class="scroll-wrap flex-col"><ul class="nav"><li class="waves-block waves-effect"><a href="/"><i class="icon icon-lg icon-home"></i> 主页</a></li><li class="waves-block waves-effect"><a href="/archives"><i class="icon icon-lg icon-archives"></i> 归档</a></li><li class="waves-block waves-effect"><a href="/tags"><i class="icon icon-lg icon-tags"></i> 标签</a></li><li class="waves-block waves-effect"><a href="/categories"><i class="icon icon-lg icon-th-list"></i> 分类</a></li><li class="waves-block waves-effect"><a href="https://jaycewu.gitee.io/resume" target="_blank"><i class="icon icon-lg icon-user"></i> 关于</a></li><li class="waves-block waves-effect"><a href="https://github.com/wjkang" target="_blank"><i class="icon icon-lg icon-github"></i> Github</a></li><li class="waves-block waves-effect"><a href="https://juejin.im/user/57bab5a45bbb500063fd28bc" target="_blank"><i class="icon icon-lg icon-dot-circle-o"></i> 掘金</a></li><li class="waves-block waves-effect"><a href="https://segmentfault.com/blog/ruoxie" target="_blank"><i class="icon icon-lg icon-trello"></i> segmentfault</a></li><li class="waves-block waves-effect"><a href="http://www.jianshu.com/u/1e9a94bda7fb" target="_blank"><i class="icon icon-lg icon-rebel"></i> 简书</a></li></ul></div></div></aside><main id="main"><header class="top-header" id="header"><div class="flex-row"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle"><i class="icon icon-lg icon-navicon"></i></a><div class="flex-col header-title ellipsis">聊聊浏览器的渲染机制</div><div class="search-wrap" id="search-wrap"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back"><i class="icon icon-lg icon-chevron-left"></i> </a><input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字"> <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search"><i class="icon icon-lg icon-search"></i></a></div><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare"><i class="icon icon-lg icon-share-alt"></i></a></div></header><header class="content-header post-header"><div class="container fade-scale"><h1 class="title">聊聊浏览器的渲染机制</h1><h5 class="subtitle"><time datetime="2016-12-17T00:00:00.000Z" itemprop="datePublished" class="page-time">2016-12-17</time><ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/前端/">前端</a></li></ul></h5></div></header><div class="container body-wrap"><aside class="post-widget"><nav class="post-toc-wrap" id="post-toc"><h4>TOC</h4><ol class="post-toc"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#外部资源是如何请求的"><span class="post-toc-number">1.</span> <span class="post-toc-text">外部资源是如何请求的</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#HTML-是否解析一部分就显示一部分"><span class="post-toc-number">2.</span> <span class="post-toc-text">HTML 是否解析一部分就显示一部分</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#script标签的位置对HTML解析有什么影响"><span class="post-toc-number">3.</span> <span class="post-toc-text">script标签的位置对HTML解析有什么影响</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#css文件的影响"><span class="post-toc-number">4.</span> <span class="post-toc-text">css文件的影响</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#图片资源的影响"><span class="post-toc-number">5.</span> <span class="post-toc-text">图片资源的影响</span></a></li></ol></nav></aside><article id="post-聊聊浏览器的渲染机制" class="post-article article-type-post fade" itemprop="blogPost"><div class="post-card"><h1 class="post-card-title">聊聊浏览器的渲染机制</h1><div class="post-meta"><time class="post-time" title="2016-12-17 00:00:00" datetime="2016-12-17T00:00:00.000Z" itemprop="datePublished">2016-12-17</time><ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/前端/">前端</a></li></ul><span id="busuanzi_container_page_pv" title="文章总阅读量" style="display:none"><i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span></span></div><div class="post-content" id="post-content" itemprop="postContent"><blockquote><p>本文中浏览器特指Chrome浏览器</p></blockquote><p>开始之前说说几个概念，以及在准备写这篇文章之前对浏览器的渲染机制的了解：</p><blockquote><p>DOM：Document Object Model，浏览器将HTML解析成树形的数据结构，简称DOM。<br>CSSOM：CSS Object Model，浏览器将CSS代码解析成树形的数据结构<br>Render Tree：DOM 和 CSSOM 合并后生成 Render Tree(Render Tree 和DOM一样，以多叉树的形式保存了每个节点的css属性、节点本身属性、以及节点的孩子节点，display:none 的节点不会被加入 Render Tree，而 visibility: hidden 则会，所以，如果某个节点最开始是不显示的，设为 display:none 是更优的。)</p></blockquote><p>查阅了一些关于浏览器渲染机制的文章后，得到以下比较重要或者有争议性的观点：</p><blockquote><p>1.<strong>Create/Update DOM And request css/image/js</strong>：浏览器请求到HTML代码后，在生成DOM的最开始阶段（应该是 Bytes → characters 后），并行发起css、图片、js的请求，无论他们是否在HEAD里。<em>注意：发起 js 文件的下载 request 并不需要 DOM 处理到那个 script 节点，比如：简单的正则匹配就能做到这一点，虽然实际上并不一定是通过正则：）。这是很多人在理解渲染机制的时候存在的误区。</em><br>2.<strong>Create/Update Render CSSOM</strong>：CSS文件下载完成，开始构建CSSOM<br>3.<strong>Create/Update Render Tree</strong>：所有CSS文件下载完成，CSSOM构建结束后，和 DOM 一起生成 Render Tree。<br>4.<strong>Layout</strong>：有了Render Tree，浏览器已经能知道网页中有哪些节点、各个节点的CSS定义以及他们的从属关系。下一步操作称之为Layout，顾名思义就是计算出每个节点在屏幕中的位置。<br>5.<strong>Painting</strong>：Layout后，浏览器已经知道了哪些节点要显示（which nodes are visible）、每个节点的CSS属性是什么（their computed styles）、每个节点在屏幕中的位置是哪里（geometry）。就进入了最后一步：Painting，按照算出来的规则，通过显卡，把内容画到屏幕上。</p></blockquote><p><a href="https://segmentfault.com/a/1190000004292479" target="_blank" rel="noopener">出处</a></p><blockquote><p>浏览器的主要组件为 (1.1)：<br>1.<strong>用户界面</strong> - 包括地址栏、前进/后退按钮、书签菜单等。除了浏览器主窗口显示的您请求的页面外，其他显示的各个部分都属于用户界面。<br>2.<strong>浏览器引擎</strong> - 在用户界面和呈现引擎之间传送指令。<br>3.<strong>呈现引擎</strong> - 负责显示请求的内容。如果请求的内容是 HTML，它就负责解析 HTML 和 CSS 内容，并将解析后的内容显示在屏幕上。<br>4.<strong>网络</strong> - 用于网络调用，比如 HTTP 请求。其接口与平台无关，并为所有平台提供底层实现。<br>5.<strong>用户界面后端</strong> - 用于绘制基本的窗口小部件，比如组合框和窗口。其公开了与平台无关的通用接口，而在底层使用操作系统的用户界面方法。<br>6.<strong>JavaScript 解释器</strong>。用于解析和执行 JavaScript 代码。<br>7.<strong>数据存储</strong>。这是持久层。浏览器需要在硬盘上保存各种数据，例如 Cookie。新的 HTML 规范 (HTML5) 定义了“网络数据库”，这是一个完整（但是轻便）的浏览器内数据库。<br>值得注意的是，和大多数浏览器不同，Chrome 浏览器的每个标签页都分别对应一个呈现引擎实例。每个标签页都是一个独立的进程。</p></blockquote><blockquote><p><strong>主流程</strong><br>呈现引擎一开始会从网络层获取请求文档的内容，内容的大小一般限制在 8000 个块以内。<br>然后进行如下所示的基本流程：<br></p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/flow.png" alt></div><div class="image-caption"></div></figure><br>呈现引擎将开始解析 HTML 文档，并将各标记逐个转化成“内容树”上的 DOM 节点。同时也会解析外部 CSS 文件以及样式元素中的样式数据。HTML 中这些带有视觉指令的样式信息将用于创建另一个树结构：呈现树。<br>呈现树包含多个带有视觉属性（如颜色和尺寸）的矩形。这些矩形的排列顺序就是它们将在屏幕上显示的顺序。<br>呈现树构建完毕之后，进入“布局”处理阶段，也就是为每个节点分配一个应出现在屏幕上的确切坐标。下一个阶段是绘制 - 呈现引擎会遍历呈现树，由用户界面后端层将每个节点绘制出来。<br>需要着重指出的是，这是一个<strong>渐进</strong>的过程。为达到更好的用户体验，呈现引擎会力求尽快将内容显示在屏幕上。它<strong>不必等到整个 HTML 文档解析完毕之后，就会开始构建呈现树和设置布局</strong>。在<strong>不断接收和处理来自网络的其余内容的同时，呈现引擎会将部分内容解析并显示出来</strong>。<p></p></blockquote><blockquote><p><strong>解析算法</strong><br>HTML 无法用常规的自上而下或自下而上的解析器进行解析。<br>原因在于：<br>1.语言的宽容本质。<br>2.浏览器历来对一些常见的无效 HTML 用法采取包容态度。<br>3.解析过程需要不断地反复。源内容在解析过程中通常不会改变，但是在 HTML 中，脚本标记如果包含 document.write，就会添加额外的标记，这样解析过程实际上就更改了输入内容。<br>由于不能使用常规的解析技术，浏览器就创建了自定义的解析器来解析 HTML</p></blockquote><blockquote><p><strong>处理脚本和样式表的顺序</strong><br><strong>脚本</strong><br>网络的模型是同步的。网页作者希望解析器遇到<code>&lt;script&gt;</code>标记时立即解析并执行脚本。文档的解析将停止，直到脚本执行完毕。如果脚本是外部的，那么解析过程会停止，直到从网络同步抓取资源完成后再继续。此模型已经使用了多年，也在 HTML4 和 HTML5 规范中进行了指定。作者也可以将脚本标注为“defer”，这样它就不会停止文档解析，而是等到解析结束才执行。HTML5 增加了一个选项，可将脚本标记为异步，以便由其他线程解析和执行。<br><strong>预解析</strong><br>WebKit 和 Firefox 都进行了这项优化。在执行脚本时，其他线程会解析文档的其余部分，找出并加载需要通过网络加载的其他资源。通过这种方式，资源可以在并行连接上加载，从而提高总体速度。请注意，预解析器不会修改 DOM 树，而是将这项工作交由主解析器处理；预解析器只会解析外部资源（例如外部脚本、样式表和图片）的引用。<br><strong>样式表</strong><br>另一方面，样式表有着不同的模型。理论上来说，应用样式表不会更改 DOM 树，因此似乎没有必要等待样式表并停止文档解析。但这涉及到一个问题，就是脚本在文档解析阶段会请求样式信息。如果当时还没有加载和解析样式，脚本就会获得错误的回复，这样显然会产生很多问题。这看上去是一个非典型案例，但事实上非常普遍。Firefox 在样式表加载和解析的过程中，会禁止所有脚本。而对于 WebKit 而言，仅当脚本尝试访问的样式属性可能受尚未加载的样式表影响时，它才会禁止该脚本。<br><strong>呈现树构建</strong><br>在 DOM 树构建的同时，浏览器还会构建另一个树结构：呈现树。这是由可视化元素按照其显示顺序而组成的树，也是文档的可视化表示。它的作用是让您按照正确的顺序绘制内容。</p></blockquote><p><a href="https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#The_order_of_processing_scripts_and_style_sheets" target="_blank" rel="noopener">出处</a></p><p>根据以上长篇大论，可以归结为以下几点：</p><blockquote><p><strong><a href="https://segmentfault.com/a/1190000004292479" target="_blank" rel="noopener">文章一</a></strong>：<br>1.浏览器请求到html结构后，并发请求js,css,图片等资源，并不是解析到相应节点才去发送网络请求。</p></blockquote><blockquote><p><strong><a href="https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#The_order_of_processing_scripts_and_style_sheets" target="_blank" rel="noopener">文章二</a></strong>：<br>1.HTML解析为dom树，不是简单的自上而下，而是需要不断地反复，比如解析到脚本标签，脚本修改之前已经解析的dom，这就要往回重新解析一遍<br>2.HTML 解析一部分就显示一部分（不管样式表是否已经下载完成）<br>3.<code>&lt;script&gt;</code>标记会阻塞文档的解析(DOM树的构建)直到脚本执行完，如果脚本是外部的，需等到脚本下载并执行完成才继续往下解析。<br>4.外部资源是解析过程中预解析加载的(脚本阻塞了解析，其他线程会解析文档的其余部分，找出并加载)，而不是一开始就一起请求的(实际上看起来也是并发请求的，因为请求不相互依赖)</p></blockquote><p>为了直观的观察浏览器加载和渲染的细节，本地用nodejs搭建一个简单的HTTP Server。<br>server.js:<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> hostname = <span class="string">'127.0.0.1'</span>;</span><br><span class="line"><span class="keyword">const</span> port = <span class="number">8080</span>;</span><br><span class="line">http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (req.url == <span class="string">'/a.js'</span>) &#123;</span><br><span class="line">        fs.readFile(<span class="string">'a.js'</span>, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">            res.writeHead(<span class="number">200</span>, &#123;<span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span>&#125;);</span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                res.write(data);</span><br><span class="line">                res.end()</span><br><span class="line">            &#125;, <span class="number">10000</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (req.url == <span class="string">'/b.js'</span>) &#123;</span><br><span class="line">        fs.readFile(<span class="string">'b.js'</span>, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">            res.writeHead(<span class="number">200</span>, &#123;<span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span>&#125;);</span><br><span class="line">            res.write(data);</span><br><span class="line">            res.end()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (req.url == <span class="string">'/style.css'</span>) &#123;</span><br><span class="line">        fs.readFile(<span class="string">'style.css'</span>, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">            res.writeHead(<span class="number">200</span>, &#123;<span class="string">'Content-Type'</span>: <span class="string">'text/css'</span>&#125;);</span><br><span class="line">            res.write(data);</span><br><span class="line">            res.end()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (req.url == <span class="string">'/index.html'</span>) &#123;</span><br><span class="line">        fs.readFile(<span class="string">'index.html'</span>, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">            res.writeHead(<span class="number">200</span>, &#123;<span class="string">'Content-Type'</span>: <span class="string">'text/html'</span>&#125;);</span><br><span class="line">            res.write(data);</span><br><span class="line">            res.end()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).listen(port, hostname, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Server running at '</span> + hostname);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p></p><p>index.html:<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"cache-control"</span> <span class="attr">content</span>=<span class="string">"no-cache,no-store, must-revalidate"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>浏览器渲染<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/a.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://127.0.0.1:8080/style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">'hh'</span>&gt;</span>1111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/b.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>3333333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><p>可以看到，服务端将对a.js的请求延迟10秒返回。</p><p>Server启动后，在chrome浏览器中打开<a href="http://127.0.0.1:8080/index.html" target="_blank" rel="noopener">http://127.0.0.1:8080/index.html</a></p><h4 id="外部资源是如何请求的"><a href="#外部资源是如何请求的" class="headerlink" title="外部资源是如何请求的"></a>外部资源是如何请求的</h4><p>看一下TimeLine</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-c94bff6f56b4d287.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></div><div class="image-caption"></div></figure><p>可以看到，第一次解析html的时候，外部资源好像是一起请求的，最后一次Finish Loading是a.js的，因为服务端延迟的10秒钟。文章二中说资源是预解析加载的，就是说style.css和b.js是a.js造成阻塞的时候才发起的请求，图中也是可以解释得通，因为第一次Parse HTML的时候就遇到阻塞，然后预解析就去发起请求，所以看起来是一起请求的。<br>将index.html内容增加足够多，并且在最后面才加入script:<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"cache-control"</span> <span class="attr">content</span>=<span class="string">"no-cache,no-store, must-revalidate"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>浏览器渲染<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://127.0.0.1:8080/style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">'hh'</span>&gt;</span>1111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>重复<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>重复<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">....</span><br><span class="line">....重复5000行</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/b.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/a.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>3333333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><p>多刷新几次，查看TimeLine</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-a083e77f86cbdd64.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></div><div class="image-caption"></div></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-969ad259436c806f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></div><div class="image-caption"></div></figure><p>可以发现，当html内容太多的时候，浏览器需要分段接收，解析的时候也要分段解析。还可以看到，请求资源的时机是无法确定的，但肯定不是同时请求的，也不是解析到指定标签的时候才去请求，浏览器会自行判断，如果当前操作比较耗时，就会去加载后面的资源。</p><h4 id="HTML-是否解析一部分就显示一部分"><a href="#HTML-是否解析一部分就显示一部分" class="headerlink" title="HTML 是否解析一部分就显示一部分"></a>HTML 是否解析一部分就显示一部分</h4><p>修改 index.html：<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"cache-control"</span> <span class="attr">content</span>=<span class="string">"no-cache,no-store, must-revalidate"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>浏览器渲染<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://127.0.0.1:8080/style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">'hh'</span>&gt;</span>1111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/b.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/a.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>3333333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-158f157de2dcfe94.gif?imageMogr2/auto-orient/strip" alt></div><div class="image-caption"></div></figure><p>因为a.js的延迟，解析到a.js所在的script标签的时候，a.js还没有下载完成，阻塞并停止解析，之前解析的已经绘制显示出来了。当a.js下载完成并执行完之后继续后面的解析。当然，浏览器不是解析一个标签就绘制显示一次，当遇到阻塞或者比较耗时的操作的时候才会先绘制一部分解析好的。</p><h4 id="script标签的位置对HTML解析有什么影响"><a href="#script标签的位置对HTML解析有什么影响" class="headerlink" title="script标签的位置对HTML解析有什么影响"></a><code>script</code>标签的位置对HTML解析有什么影响</h4><p>修改index.html：<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"cache-control"</span> <span class="attr">content</span>=<span class="string">"no-cache,no-store, must-revalidate"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>浏览器渲染<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://127.0.0.1:8080/style.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/b.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/a.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">'hh'</span>&gt;</span>1111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>3333333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-26b26dfb7981d3f6.gif?imageMogr2/auto-orient/strip" alt></div><div class="image-caption"></div></figure><p>还是因为a.js的阻塞使得解析停止，a.js下载完成之前，页面无法显示任何东西。<br></p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-f0832497c722b2ee.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></div><div class="image-caption"></div></figure><br>整个处理过程中，Parse HTML 3次，计算元素样式1次，页面布局计算1次，绘制一次。<p></p><p>修改index.html：<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"cache-control"</span> <span class="attr">content</span>=<span class="string">"no-cache,no-store, must-revalidate"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>浏览器渲染<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://127.0.0.1:8080/style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">'hh'</span>&gt;</span>1111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>3333333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/b.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/a.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-3cc4c4bf49217436.gif?imageMogr2/auto-orient/strip" alt></div><div class="image-caption"></div></figure><p>解析到a.js部分的时候，页面要显示的东西已经解析完了，a.js不会影响页面的呈现速度。<br></p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-e794dfa1aac30651.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></div><div class="image-caption"></div></figure><br>整个处理过程中，Parse HTML 3次，计算元素样式2次，页面布局计算1次，绘制一次。<p></p><p>修改index.html<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"cache-control"</span> <span class="attr">content</span>=<span class="string">"no-cache,no-store, must-revalidate"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>浏览器渲染<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://127.0.0.1:8080/style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">'hh'</span>&gt;</span>1111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/b.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/a.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>3333333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-0dcaaf21c8a38aa5.gif?imageMogr2/auto-orient/strip" alt></div><div class="image-caption"></div></figure><p>阻塞后面的解析，导致不能很快的显示。</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-3dce52c52ab84223.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></div><div class="image-caption"></div></figure><p>整个处理过程中，Parse HTML 3次，计算元素样式2次，页面布局计算2次，绘制2次。<br>可以发现浏览器优化得非常好，当阻塞在a.js的时候，现将已经解析的部分显示（计算元素样式，布局排版，绘制），当a.js下载好后接着解析和显示后面的（因为a.js后面还有要显示到页面上的元素，所以还需要进行1次计算元素样式，布局排版，绘制）</p><p>修改index.html<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"cache-control"</span> <span class="attr">content</span>=<span class="string">"no-cache,no-store, must-revalidate"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>浏览器渲染<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://127.0.0.1:8080/style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">'hh'</span>&gt;</span>1111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/a.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>3333333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">"hh"</span>).style.height=<span class="string">"200px"</span>;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><p>a.js阻塞的时候，排版，绘制1次；a.js下载完后重排，重绘一次；修改DOM,引起重排，重绘一次。是不是这样呢？看下图<br></p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-a1003e53325edcdd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></div><div class="image-caption"></div></figure><p></p><p>事实是修改DOM并没有引起重排，重绘。因为浏览器将a.js下载完成并执行后的一次重排和重绘与修改DOM本应该导致的重排和重绘积攒一批，然后做一次重排，重绘</p><blockquote><p>浏览器是聪明的，它不会你每改一次样式，它就reflow或repaint一次。<strong>一般来说，浏览器会把这样的操作积攒一批，然后做一次reflow，这又叫异步reflow或增量异步reflow</strong>。但是有些情况浏览器是不会这么做的，比如：resize窗口，改变了页面默认的字体，等。对于这些操作，浏览器会马上进行reflow。</p></blockquote><h4 id="css文件的影响"><a href="#css文件的影响" class="headerlink" title="css文件的影响"></a>css文件的影响</h4><p>服务端将style.css的相应也设置延迟。<br>修改index.html：<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"cache-control"</span> <span class="attr">content</span>=<span class="string">"no-cache,no-store, must-revalidate"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>浏览器渲染<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://127.0.0.1:8080/style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">'hh'</span>&gt;</span>1111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>3333333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/a.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-e422b46948376311.gif?imageMogr2/auto-orient/strip" alt></div><div class="image-caption"></div></figure><p>可以看出来，css文件不会阻塞HTML解析，但是会阻塞渲染，导致css文件未下载完成之前已经解析好html也无法先显示出来。</p><p>接着修改index.html：<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"cache-control"</span> <span class="attr">content</span>=<span class="string">"no-cache,no-store, must-revalidate"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>浏览器渲染<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">'hh'</span>&gt;</span>1111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>3333333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://127.0.0.1:8080/style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/a.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><p>同样阻塞渲染</p><p>修改index.html<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"cache-control"</span> <span class="attr">content</span>=<span class="string">"no-cache,no-store, must-revalidate"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>浏览器渲染<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://127.0.0.1:8080/style.css"</span> <span class="attr">media</span>=<span class="string">"print"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">'hh'</span>&gt;</span>1111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>3333333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://127.0.0.1:8080/a.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><p>注意media=”print”<br></p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-c3e40d64eb51ddbe.gif?imageMogr2/auto-orient/strip" alt></div><div class="image-caption"></div></figure><br>因为指定了media=”print”，样式不起作用，不会阻塞渲染。<p></p><blockquote><link href="style.css" rel="stylesheet"></blockquote><p><link href="style.css" rel="stylesheet" media="all"></p><p>&lt;link href=”portrait.css” rel=”stylesheet media=”orientation:portrait”&gt;</p><p><link href="print.css" rel="stylesheet" media="print"><br>第一条声明阻塞渲染，匹配所有情况。<br>第二条声明一样阻塞渲染：”all” 是默认类型，如果你未指定任何类型，则默认为 “all”。因此，第一条声明和第二条声明实际上是一样的。<br>第三条声明有一条动态媒体查询，在页面加载时判断。根据页面加载时设备的方向，portrait.css 可能阻塞渲染，也可能不阻塞。<br>最后一条声明只适用打印，因此，页面在浏览器中首次加载时，不会阻塞渲染。</p><p>但是。。。看一下火狐的表现<br></p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-f89c59117b544bb1.gif?imageMogr2/auto-orient/strip" alt></div><div class="image-caption"></div></figure><p></p><h4 id="图片资源的影响"><a href="#图片资源的影响" class="headerlink" title="图片资源的影响"></a>图片资源的影响</h4><p>修改index.html<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"cache-control"</span> <span class="attr">content</span>=<span class="string">"no-cache,no-store, must-revalidate"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>浏览器渲染<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://127.0.0.1:8080/style.css"</span> <span class="attr">media</span>=<span class="string">"print"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">'hh'</span>&gt;</span>1111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">[站外图片上传中……(2)]</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>3333333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><p>图片比较大，2M多，但服务端还是要延迟10秒响应。</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-885f25070824c811.gif?imageMogr2/auto-orient/strip" alt></div><div class="image-caption"></div></figure><p>图片既不阻塞解析，也不阻塞渲染。</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-e5e8e2a262aeaba7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></div><div class="image-caption"></div></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-045480359bdfb725.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></div><div class="image-caption"></div></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://upload-images.jianshu.io/upload_images/2125695-e53be79aa842709d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></div><div class="image-caption"></div></figure><p>图片未请求回来之前，先进行一次layout和paint，paint的范围就是页面初始的可视区域。当返回一部分图片信息后（估计是得到了图片的尺寸），再进行一次layout和paint,paint的范围受到图片尺寸的影响。当图片信息全部返回时，最后进行一次paint。<br>如果固定img的宽高，当返回一部分图片信息后，不会再layout，但仍会paint一次。<br>补充：图片用作背景（不是写在CSS文件内）是在Recalculate Style的时候才发起的请求，layout、paint次数和固定宽高的img一样。背景图属性写在CSS文件里，则CSS文件下载并执行Recalculate Style的时候才会请求图片。</p><p>参考</p><blockquote><p><a href="http://coolshell.cn/articles/9666.html" target="_blank" rel="noopener">浏览器的渲染原理简介</a><br><a href="https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#The_order_of_processing_scripts_and_style_sheets" target="_blank" rel="noopener">浏览器的工作原理：新式网络浏览器幕后揭秘</a><br><a href="https://segmentfault.com/a/1190000004292479" target="_blank" rel="noopener">JS 一定要放在 Body 的最底部么？聊聊浏览器的渲染机制</a><br><a href="https://blog.chromium.org/2015/03/new-javascript-techniques-for-rapid.html" target="_blank" rel="noopener">https://blog.chromium.org/2015/03/new-javascript-techniques-for-rapid.html</a><br><a href="https://developers.google.cn/web/fundamentals/performance/critical-rendering-path/render-blocking-css" target="_blank" rel="noopener">https://developers.google.cn/web/fundamentals/performance/critical-rendering-path/render-blocking-css</a></p></blockquote></div><blockquote class="post-copyright"><div class="content"></div><footer><a href="https://jaycewu.site"><img src="/img/avatar.jpeg" alt="若邪"> 若邪</a></footer></blockquote><div class="post-footer"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/渲染机制/">渲染机制</a></li></ul><div class="page-share-wrap"><div class="page-share" id="pageShare"><ul class="reset share-icons"><li><a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://jaycewu.site/2016/12/17/聊聊浏览器的渲染机制/&title=《聊聊浏览器的渲染机制》 — 若邪&pic=https://jaycewu.site/img/avatar.jpeg" data-title="微博"><i class="icon icon-weibo"></i></a></li><li><a class="weixin share-sns wxFab" href="javascript:;" data-title="微信"><i class="icon icon-weixin"></i></a></li><li><a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://jaycewu.site/2016/12/17/聊聊浏览器的渲染机制/&title=《聊聊浏览器的渲染机制》 — 若邪&source=" data-title=" QQ"><i class="icon icon-qq"></i></a></li><li><a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://jaycewu.site/2016/12/17/聊聊浏览器的渲染机制/" data-title=" Facebook"><i class="icon icon-facebook"></i></a></li><li><a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《聊聊浏览器的渲染机制》 — 若邪&url=https://jaycewu.site/2016/12/17/聊聊浏览器的渲染机制/&via=https://jaycewu.site" data-title=" Twitter"><i class="icon icon-twitter"></i></a></li><li><a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://jaycewu.site/2016/12/17/聊聊浏览器的渲染机制/" data-title=" Google+"><i class="icon icon-google-plus"></i></a></li></ul></div><a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle"><i class="icon icon-share-alt icon-lg"></i></a></div></div></div><nav class="post-nav flex-row flex-justify-between"><div class="waves-block waves-effect prev"><a href="/2016/12/27/webpack resolve.alias ProvidePlugin externals/" id="post-prev" class="post-nav-link"><div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div><h4 class="title">webpack resolve.alias ProvidePlugin externals</h4></a></div><div class="waves-block waves-effect next"><a href="/2016/11/22/npm小结/" id="post-next" class="post-nav-link"><div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div><h4 class="title">npm小结</h4></a></div></nav><section class="comments" id="comments"><div id="gitment_thread"></div><link rel="stylesheet" href="/css/gitalk.css?v=1.6.10"><script src="/js/gitalk.min.js?v=1.6.10"></script><script>var gitalk=new Gitalk({clientID:"f982ac953ab75a652b3a",clientSecret:"e2c4cd9eefa872763864a42f4944ce5ef200da4b",repo:"jaycewu.site",owner:"wjkang",admin:["wjkang"],distractionFreeMode:!0,createIssueManually:!0});gitalk.render("gitment_thread")</script></section></article></div><footer class="footer"><div class="top"><p><span id="busuanzi_container_site_uv" style="display:none">站点总访客数：<span id="busuanzi_value_site_uv"></span> </span><span id="busuanzi_container_site_pv" style="display:none">站点总访问量：<span id="busuanzi_value_site_pv"></span></span></p><p><span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span> <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span></p></div><div class="bottom"><p><span>若邪 &copy; 2015 - 2019</span> <span>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a> </span><span class="hosted" style="display:none">Hosted by <a href="https://coding.net" target="_blank">Coding Pages</a></span></p></div></footer></main><div class="mask" id="mask"></div><a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a><div class="global-share" id="globalShare"><ul class="reset share-icons"><li><a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://jaycewu.site/2016/12/17/聊聊浏览器的渲染机制/&title=《聊聊浏览器的渲染机制》 — 若邪&pic=https://jaycewu.site/img/avatar.jpeg" data-title="微博"><i class="icon icon-weibo"></i></a></li><li><a class="weixin share-sns wxFab" href="javascript:;" data-title="微信"><i class="icon icon-weixin"></i></a></li><li><a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://jaycewu.site/2016/12/17/聊聊浏览器的渲染机制/&title=《聊聊浏览器的渲染机制》 — 若邪&source=" data-title=" QQ"><i class="icon icon-qq"></i></a></li><li><a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://jaycewu.site/2016/12/17/聊聊浏览器的渲染机制/" data-title=" Facebook"><i class="icon icon-facebook"></i></a></li><li><a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《聊聊浏览器的渲染机制》 — 若邪&url=https://jaycewu.site/2016/12/17/聊聊浏览器的渲染机制/&via=https://jaycewu.site" data-title=" Twitter"><i class="icon icon-twitter"></i></a></li><li><a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://jaycewu.site/2016/12/17/聊聊浏览器的渲染机制/" data-title=" Google+"><i class="icon icon-google-plus"></i></a></li></ul></div><div class="page-modal wx-share" id="wxShare"><a class="close" href="javascript:;"><i class="icon icon-close"></i></a><p>扫一扫，分享到微信</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACvElEQVR42u3aQY7bMAwF0Nz/0ikwmxYIHH+SYiYFnlZFxnH0tBBZko9HvJ4/6/WTf9f7J6+++/rM1V9f33Ns4eHh4bW2frXyZxLe1RbzX6/uBw8PD2+P9z4Y5D+QBJX8Dk8Cyc1v4eHh4f0q731anCfl+Xffp914eHh4/wsvSX9zRl6qwMPDw/s2Xr7pvBQ7KUb0jhgPDw/vM7xeQvy7/17s7+Hh4eENuupJo6t6QefNszwMXP46Hh4e3gKvOj6VlBiqbbMEU40C5WwdDw8Pb8DLtzsZvaqGilHyjYeHh7dbTX3kW0yKvPkoVdL0qibfeHh4eBu85HU5sleqmAwf3Bw3Hh4e3gd5een21NBAvofCQePh4eEt83pDA9V2/mRAqnz0eHh4eGu8vOVfvW9PNbGqb3hU4wweHh5erTZ7U3Q4dYn3Di4ZaIiOAw8PD+8oL/9C/nlewqgmytXjwMPDw9vgvb+C9xr/vZGp3sgXHh4e3gavmuBOGlQTwORY8fDw8M7yepi83FAdHej9dVRrwcPDw4t586LAqfJBL/DcBAY8PDy8o7x8i6fS7urYwWgGAA8PD2+Nl+fd+X/+kyeTQkNv5AsPDw9vm9e7oKuHNS9DVIvFeHh4eHu8Xolh3trv1ZubcQ8PDw/vEC8JA9XwkFz6kxGBapqOh4eHd5ZXLQf0mvrVN+RHc3P/4+Hh4S3zcur2dp/xKjTA8PDw8A7x5iu5svPhg95GjxUs8PDw8IL3P4ur2u7KA0C1qJEEEjw8PLwN3iQA5J83R6bi9xxIpvHw8PCKvF6rqTo60Gti9RLuqOKCh4eHN+bll3LO6A0lzAMJHh4e3vfw8sS69/wk0b88FDw8PLwv4PWGsapDCb3EHQ8PD++TvOpg0zx1zg+oeih4eHh427x5AywfLKgOHFSD0Ep/Dw8PD+/v+gP3R7tgKBQNIQAAAABJRU5ErkJggg==" alt="微信分享二维码"></div><script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script><script src="http://v2.uyan.cc/code/uyan.js?uid=false"></script><script>var BLOG={ROOT:"/",SHARE:!0,REWARD:!1};lazyScripts.push("//s95.cnzz.com/z_stat.php?id=1262842552&web_id=1262842552"),window.addEventListener("DOMContentLoaded",function(){location.href.indexOf("jaycewu.site")>-1&&(document.querySelector(".hosted").style.display="inline")})</script><script src="/js/main.min.js?v=1.6.10"></script><div class="search-panel" id="search-panel"><ul class="search-result" id="search-result"></ul></div><template id="search-tpl"><li class="item"><a href="{path}" class="waves-block waves-effect"><div class="title ellipsis" title="{title}">{title}</div><div class="flex-row flex-middle"><div class="tags ellipsis">{tags}</div><time class="flex-col time">{date}</time></div></a></li></template><script src="/js/search.min.js?v=1.6.10" async></script><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>!function(){var t,e=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="页面崩了！",clearTimeout(t)):(document.title="(つェ⊂)咦!又好了!",t=setTimeout(function(){document.title=e},2e3))})}()</script></body></html><!-- rebuild by neat -->